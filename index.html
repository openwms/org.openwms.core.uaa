<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src/site/markdown/index.md at 2020-03-27
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20200327" />
    <meta http-equiv="Content-Language" content="en" />
    <title>OpenWMS.org CORE: UAA &#x2013; Purpose</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/openwms/org.openwms.core.uaa">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>OpenWMS.org CORE: UAA</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2020-03-27<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.1.0-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Documentation</li>
    <li class="active"><a href="#"><span class="none"></span>Home</a></li>
    <li><a href="rest/1.1.0-SNAPSHOT/api.html" title="REST API Documentation"><span class="none"></span>REST API Documentation</a></li>
    <li><a href="apidocs/index.html" title="Javadoc"><span class="none"></span>Javadoc</a></li>
    <li><a href="schemaspy/relationships.html" title="Database Schema"><span class="none"></span>Database Schema</a></li>
    <li><a href="https://sonarcloud.io/dashboard?id=org.openwms:org.openwms.core.uaa" class="externalLink" title="Sonarcloud"><span class="none"></span>Sonarcloud</a></li>
    <li><a href="jacoco/index.html" title="Jacoco"><span class="none"></span>Jacoco</a></li>
      <li class="nav-header">Project</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-down"></span>Project Information</a>
    <ul class="nav nav-list">
    <li class="active"><a href="#"><span class="none"></span>About</a></li>
    <li><a href="summary.html" title="Summary"><span class="none"></span>Summary</a></li>
    <li><a href="team.html" title="Team"><span class="none"></span>Team</a></li>
    <li><a href="issue-management.html" title="Issue Management"><span class="none"></span>Issue Management</a></li>
    <li><a href="ci-management.html" title="CI Management"><span class="none"></span>CI Management</a></li>
    <li><a href="scm.html" title="Source Code Management"><span class="none"></span>Source Code Management</a></li>
    </ul>
</li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Purpose</h1>
<p>This service is built to fulfill two different requirements regarding the handling of Users of the system. UAA means User Authentication and Administration.</p>
<p>First the service is capable to work as <a class="externalLink" href="http://openid.net/connect">OpenID Connect</a> authentication endpoint and can authenticate user credentials against a persistent storage.</p>
<p>The second part deals with administration of Users like creating new Users, updating properties of existing ones or deleting them. Most application permissions are not directly assigned to Users explicitly, but to Roles. Users are assigned to Roles and application permissions are granted to particular Roles. Administration of Roles and permissions is especially required for an UI application.</p>
<p><img src="images/ClassDiagram.svg" alt="classes" /></p>
<p>An User has embedded UserDetails, and Emails assigned. Furthermore the password history of the User is managed and compared against new passwords. An User can be assigned to multiple Roles and a Role can consist of several Users. A Role is a SecurityObject in general and has multiple Grants assigned. A Grant is a permission that can be referenced from a client application.</p>
<h1>Resources</h1>
<p><a class="externalLink" href="https://travis-ci.com/openwms/org.openwms.core.uaa"><img src="https://travis-ci.com/openwms/org.openwms.core.uaa.svg?branch=master" alt="Build status" /></a> <a href="LICENSE"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License" /></a> <a class="externalLink" href="https://sonarcloud.io/dashboard?id=org.openwms:org.openwms.core.uaa"><img src="https://sonarcloud.io/api/project_badges/measure?project=org.openwms:org.openwms.core.uaa&amp;metric=alert_status" alt="Quality" /></a> <a class="externalLink" href="https://gitter.im/openwms/org.openwms?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/openwms/org.openwms" /></a></p>
<h1>Deployment</h1>
<p>The UAA is an essential component for all kind of applications and requires the highest degree of availability level (Highest). Therefore it is deployed in an redundant setup in different locations, on different cloud platforms with different ISP.</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th> endpoints </th>
<th> billed </th>
<th> SLA </th></tr>
</thead><tbody>

<tr class="b">
<td> <a class="externalLink" href="https://openwms-core-uaa.herokuapp.com">https://openwms-core-uaa.herokuapp.com</a></td></tr>
<tr class="a">
<td><a class="externalLink" href="https://openwms.org/uaa">https://openwms.org/uaa</a> </td>
<td> no </td>
<td> Heroku SLA for Europe region depends on AWS Europe region </td></tr>
</tbody>
</table>
<h1>Build</h1>
<p>Build a runnable fat jar with execution of all unit and in-memory database integrations, but without a <a class="externalLink" href="https://www.rabbitmq.com">RabbitMQ</a> server required to run:</p>

<div>
<div>
<pre class="source">$ mvn package
</pre></div></div>

<p>To also build and run with RabbitMQ support call:</p>

<div>
<div>
<pre class="source">$ mvn package -DsurefireArgs=-Dspring.profiles.active=ASYNCHRONOUS,TEST
</pre></div></div>

<p>But notice that this requires a RabbitMQ server running locally with default settings.</p>
<p>Run the Sonar analysis:</p>

<div>
<div>
<pre class="source">$ mvn package -Psonar
</pre></div></div>
<section>
<h2><a name="Run"></a>Run</h2>
<p>After the binary is built it can be started from command line. By default no other infrastructure services are required to run this service.</p>

<div>
<div>
<pre class="source">$ java -jar target/openwms-core-uaa-exec.jar
</pre></div></div>

<p>In a distributed Cloud environment the service configuration is fetched from a centralized configuration service. This behavior can be enabled by activating the Spring Profile CLOUD. Additionally it makes sense to enable asynchronous communication that requires <a class="externalLink" href="https://www.rabbitmq.com">RabbitMQ</a> as an AMQP message broker - just add another profile ASYNCHRONOUS. If the latter is not applies all asynchronous AMQP endpoints are disabled and the service does not send any events nor does it receive application events from remote services.</p>

<div>
<div>
<pre class="source">$ java -jar target/openwms-core-uaa-exec.jar --spring.profiles.active=CLOUD,ASYNCHRONOUS
</pre></div></div>

<p>Now the configuration service is tried to be discovered at service startup. The service fails to start if no instance of the configuration service is available after retrying a configured amount of times.</p></section><section>
<h2><a name="Release"></a>Release</h2>

<div>
<div>
<pre class="source">$ mvn deploy -Prelease,gpg
</pre></div></div>
<section>
<h3><a name="Release_Documentation"></a>Release Documentation</h3>

<div>
<div>
<pre class="source">$ mvn package -DsurefireArgs=-Dspring.profiles.active=ASYNCHRONOUS,TEST -Psonar
$ mvn site scm-publish:publish-scm
</pre></div></div></section></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2005&#x2013;2020
<a href="https://www.interface21.io">Interface21.io</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>